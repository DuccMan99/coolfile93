{"version":3,"sources":["midi.js"],"names":["global","browserVersion","nameOffset","verOffset","ix","nAgt","navigator","userAgent","browserName","appName","fullVersion","parseFloat","appVersion","majorVersion","parseInt","indexOf","substring","lastIndexOf","toLowerCase","toUpperCase","isNaN","bv","Object","platform","require_script","file","callback","script","document","getElementsByTagName","newjs","createElement","onreadystatechange","readyState","onload","onerror","log","src","type","parentNode","insertBefore","get_next_wave","ev","read_wave_bytes","Module","ccall","song","waveBuffer","audioBufferSize","isEndless","release_player","max_i16","Math","pow","i","outputBuffer","getChannelData","getValue","start_time","context","currentTime","load_missing_patch","url","path","filename","request","XMLHttpRequest","open","responseType","status","num_missing","FS","createDataFile","Int8Array","response","MIDIjs","message_callback","stream","midiFileBuffer","midiDataArray","length","MID_AUDIO_S16LSB","options","sampleRate","source","createScriptProcessor","_malloc","onaudioprocess","connect","destination","callback_timer","setInterval","webAudioAPI_callback","player_callback_interval","send","preload_file","fileUrl","unmute_iOS_hack","sinusBuffer","createBuffer","bufferSource","createBufferSource","buffer","start","player_event","time","player_callback","play_WebAudioAPI","stop_WebAudioAPI","audioBufferSizePlayer","play2_WebAudioAPI","scripts","script_src","libtimidity_url","play_WebAudioAPI_with_script_loaded","dataIndex","midiDataString","atob","Uint8Array","ArrayBuffer","charCodeAt","play_WebAudioAPI_midi_data","writeArrayToMemory","rval","missingPatch","midijs_url","noteOn_WebAudioAPI","channel","key","velocity","audioBufferSizeNoteOn","startSynth_WebAudioAPI","noteOn","disconnect","_free","clearInterval","audio_status","getAbsoluteUrl","aForAbsoluteUrl","href","forceHttp","absUrl","httpUrl","replace","fallback_callback","Date","getTime","play_bgsound","raw_url","stop_bgsound","sounddiv","getElementById","lastChild","setAttribute","innerHTML","body","appendChild","play_object","stop_object","removeChild","my_url","index","substr","message","logging","console","initError","audioMethod","window","AudioContext","webkitAudioContext","e","set_logging","get_loggging","get_audio_status","play","stop","startSynth","location","protocol","setTimeout","err","this"],"mappings":"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","file":"midijs/lib/midi.js","sourceRoot":"http://midijs/src"}